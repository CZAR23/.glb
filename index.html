<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTFâ€‘8">
  <title>Istown 3D on GitHub Pages</title>
  <style>body { margin:0; overflow:hidden } canvas{ display:block }</style>
</head>
<body>
  <!-- Three.js setup -->
  <script type="module">
    import * as THREE from 'https://unpkg.com/three@0.153.0/build/three.module.js';
    import { GLTFLoader } from 'https://unpkg.com/three@0.153.0/examples/jsm/loaders/GLTFLoader.js';

    const scene = new THREE.Scene();
    const camera = new THREE.PerspectiveCamera(50, innerWidth/innerHeight, 0.1, 1000);
    camera.position.set(0,1,3);

    const renderer = new THREE.WebGLRenderer({ antialias:true });
    renderer.setSize(innerWidth, innerHeight);
    document.body.appendChild(renderer.domElement);
    window.addEventListener('resize', () => {
      camera.aspect = innerWidth/innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(innerWidth, innerHeight);
    });

    const light = new THREE.HemisphereLight(0xffffff, 0x444444, 1.2);
    scene.add(light);

    let mixer, clock = new THREE.Clock();
    new GLTFLoader().load(
      'Easy Drawing Machine.glb',
      gltf => {
        scene.add(gltf.scene);
        const clip = gltf.animations.find(c=>c.name==='istown');
        mixer = new THREE.AnimationMixer(gltf.scene);
        if (clip) mixer.clipAction(clip).play();
      },
      undefined,
      err=>console.error('Error loading GLB:', err)
    );

    (function animate(){
      requestAnimationFrame(animate);
      const dt = clock.getDelta();
      mixer?.update(dt);
      renderer.render(scene, camera);
    })();
  </script>
</body>
</html>
